<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Payment Gateway</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        /* Menggunakan font Orbitron untuk nuansa sci-fi dan Roboto untuk keterbacaan */
        body {
            font-family: 'Roboto', sans-serif;
            color: #E0E0E0; /* Warna teks dasar abu-abu terang */
            overflow: hidden; /* Mencegah scroll bar dari canvas */
        }

        h1, h2, h3, .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }

        /* Canvas untuk latar belakang bintang-bintang */
        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at bottom, #0d1a2f 0%, #02040a 100%);
        }

        /* Efek glassmorphism untuk panel utama */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6); /* Warna slate-900 dengan transparansi */
            backdrop-filter: blur(12px) saturate(150%);
            -webkit-backdrop-filter: blur(12px) saturate(150%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        /* Gaya untuk tab menu */
        .tab-btn {
            transition: all 0.3s ease;
            text-shadow: 0 0 5px rgba(0, 195, 255, 0.5);
        }

        .tab-btn.active {
            background: rgba(56, 189, 248, 0.2); /* sky-400 dengan transparansi */
            color: #f0f9ff; /* sky-50 */
            border-bottom-color: #0ea5e9; /* sky-500 */
        }
        
        .tab-btn:not(.active):hover {
            background: rgba(56, 189, 248, 0.1);
        }

        /* Tombol metode pembayaran */
        .method-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }

        .method-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #0ea5e9;
            transform: translateY(-3px);
            box-shadow: 0 0 15px rgba(14, 165, 233, 0.5);
        }

        .method-btn.active {
            background: rgba(14, 165, 233, 0.8);
            color: #0c0a09; /* stone-950 */
            font-weight: 700;
            border-color: #0ea5e9;
            box-shadow: 0 0 20px rgba(14, 165, 233, 0.7);
        }
        
        /* Animasi */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn { animation: fadeIn 0.8s ease-out forwards; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slideUp { animation: slideUp 0.6s ease-out forwards; }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 15px rgba(14, 165, 233, 0.4); }
            50% { box-shadow: 0 0 25px rgba(14, 165, 233, 0.8); }
        }
        .animate-pulseGlow { animation: pulseGlow 2.5s infinite; }

        /* Gaya untuk area chat AI */
        .chat-container {
            height: 400px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            background: rgba(2, 6, 23, 0.7); /* slate-950 dengan transparansi */
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .chat-message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            word-wrap: break-word;
        }

        .chat-message.user {
            background-color: #0ea5e9; /* sky-500 */
            color: #0c0a09;
            align-self: flex-end;
            border-bottom-right-radius: 2px;
        }

        .chat-message.ai {
            background-color: #475569; /* slate-600 */
            color: #E0E0E0;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .chat-input {
            flex-grow: 1;
            padding: 10px 15px;
            border-radius: 25px;
            border: 1px solid #475569;
            background-color: #1e293b; /* slate-800 */
            color: #E0E0E0;
            outline: none;
        }

        .chat-input:focus {
            border-color: #0ea5e9;
            box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.5);
        }

        .chat-send-btn {
            background-color: #0ea5e9;
            color: #0c0a09;
            padding: 10px 15px;
            border-radius: 25px;
            transition: all 0.2s ease;
        }

        .chat-send-btn:hover {
            background-color: #0284c7; /* sky-600 */
            transform: translateY(-1px);
        }

        .chat-send-btn:active {
            background-color: #0369a1; /* sky-700 */
            transform: translateY(0);
        }

        .loading-dots span {
            display: inline-block;
            width: 8px;
            height: 8px;
            margin: 0 2px;
            background-color: #E0E0E0;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
        .loading-dots span:nth-child(3) { animation-delay: 0s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
    </style>
</head>
<body class="bg-slate-900">

    <canvas id="starfield"></canvas>

    <div class="min-h-screen flex items-center justify-center p-4 animate-fadeIn">
        <main class="w-full max-w-2xl glass-panel rounded-2xl overflow-hidden">
            <!-- Header Panel -->
            <header class="p-6 border-b border-slate-700/50 text-center">
                <img src="https://files.catbox.moe/4ya0zn.jpg" alt="Profil Developer" class="w-24 h-24 rounded-full mx-auto border-4 border-slate-700 shadow-lg mb-4 ring-2 ring-sky-500/50 hover:ring-sky-400 transition-all duration-300">
                <h1 class="text-3xl font-bold tracking-wider text-white">COSMIC PAYMENT</h1>
                <p class="text-sm text-slate-400 mt-1">Website Payment Pembayaran by MiwaaGOD</p>
            </header>

            <!-- Menu / Navigasi -->
            <nav class="flex bg-slate-900/50 border-b-2 border-slate-800">
                <button id="dashboard-tab" class="tab-btn active flex-1 p-4 text-base sm:text-lg font-orbitron border-b-4 border-transparent">
                    <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                </button>
                 <button id="contact-tab" class="tab-btn flex-1 p-4 text-base sm:text-lg font-orbitron border-b-4 border-transparent">
                    <i class="fas fa-user-astronaut mr-2"></i>Hubungi Dev
                </button>
                <button id="ai-assistant-tab" class="tab-btn flex-1 p-4 text-base sm:text-lg font-orbitron border-b-4 border-transparent">
                    <i class="fas fa-robot mr-2"></i>AI Asisten
                </button>
            </nav>

            <!-- Konten Panel -->
            <div class="relative">
                <!-- View Dashboard -->
                <div id="dashboard-view" class="p-6 sm:p-8">
                    <div id="payment-content" class="animate-slideUp">
                        <!-- Pilihan Tipe Pembayaran -->
                        <div class="flex justify-center gap-4 mb-6">
                            <button data-type="ewallet" class="payment-type-btn method-btn active px-5 py-2 rounded-lg"><i class="fas fa-wallet mr-2"></i>E-Wallet</button>
                            <button data-type="qris" class="payment-type-btn method-btn px-5 py-2 rounded-lg"><i class="fas fa-qrcode mr-2"></i>QRIS</button>
                        </div>

                        <!-- View E-Wallet -->
                        <div id="ewallet-view">
                            <div class="grid grid-cols-3 gap-3 mb-6">
                                <button data-method="dana" class="ewallet-method-btn method-btn p-3 rounded-lg text-center text-lg">DANA</button>
                                <button data-method="gopay" class="ewallet-method-btn method-btn p-3 rounded-lg text-center text-lg">GOPAY</button>
                                <button data-method="ovo" class="ewallet-method-btn method-btn p-3 rounded-lg text-center text-lg">OVO</button>
                            </div>
                            <div id="details-container" class="bg-slate-900/70 rounded-lg p-5 text-center min-h-[120px] flex flex-col justify-center items-center border border-slate-700">
                                <div id="placeholder" class="text-slate-400">
                                    <i class="fas fa-arrow-up text-2xl"></i>
                                    <p class="mt-2">Pilih metode pembayaran</p>
                                </div>
                                <div id="details" class="hidden w-full">
                                    <p class="text-sm text-slate-300">Silakan transfer ke nomor <span id="method-name" class="font-bold"></span> berikut:</p>
                                    <div class="flex items-center justify-center gap-4 mt-2">
                                        <p id="payment-number" class="text-2xl sm:text-3xl font-orbitron text-sky-300"></p>
                                        <button id="copy-btn" title="Salin Nomor" class="bg-sky-500 text-slate-900 w-10 h-10 rounded-full text-lg hover:bg-sky-400 active:bg-sky-600 transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-sky-400/50">
                                            <i class="far fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- View QRIS -->
                        <div id="qris-view" class="hidden text-center">
                             <p class="text-slate-300 mb-4">Pindai kode QR di bawah ini menggunakan aplikasi pembayaran Anda.</p>
                             <div class="max-w-xs mx-auto bg-white p-3 rounded-lg border-4 border-sky-400 shadow-2xl shadow-sky-500/30 animate-pulseGlow">
                                 <img src="https://files.catbox.moe/x5ixxt.jpeg" alt="Kode QRIS Pembayaran" class="w-full h-auto rounded-md">
                             </div>
                             <p class="text-xs text-slate-400 mt-4">Pastikan nama merchant tujuan sudah benar.</p>
                        </div>
                    </div>
                </div>
                
                <!-- View Hubungi Developer -->
                <div id="contact-view" class="p-6 sm:p-8 hidden">
                    <div class="text-center animate-slideUp">
                        <h2 class="text-2xl font-orbitron mb-6 text-sky-300">Hubungi Developer</h2>
                        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                            <a href="https://wa.me/628174731245" target="_blank" rel="noopener noreferrer" class="method-btn w-full sm:w-auto flex items-center justify-center px-6 py-3 rounded-lg text-lg">
                                <i class="fab fa-whatsapp text-2xl mr-3 text-green-400"></i>
                                WhatsApp
                            </a>
                            <a href="https://t.me/miwasogg" target="_blank" rel="noopener noreferrer" class="method-btn w-full sm:w-auto flex items-center justify-center px-6 py-3 rounded-lg text-lg">
                                <i class="fab fa-telegram text-2xl mr-3 text-sky-400"></i>
                                Telegram
                            </a>
                        </div>
                    </div>
                </div>

                <!-- View AI Assistant -->
                <div id="ai-assistant-view" class="p-6 sm:p-8 hidden">
                    <h2 class="text-2xl font-orbitron mb-6 text-sky-300 text-center">AI Asisten</h2>
                    <div id="chat-container" class="chat-container">
                        <!-- Pesan chat akan dimuat di sini -->
                    </div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" class="chat-input" placeholder="Ketik pesan Anda...">
                        <button id="send-chat-btn" class="chat-send-btn">
                            <i class="fas fa-paper-plane mr-2"></i>Kirim
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notifikasi -->
    <div id="notification" class="fixed bottom-8 left-1/2 -translate-x-1/2 glass-panel py-2 px-5 rounded-full text-white transition-all duration-500 opacity-0 -translate-y-10 pointer-events-none">
        <i class="fas fa-check-circle text-green-400 mr-2"></i>Nomor berhasil disalin!
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Animasi Latar Belakang Bintang ---
            const canvas = document.getElementById('starfield');
            const ctx = canvas.getContext('2d');

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();

            const stars = [];
            const numStars = 200;

            for (let i = 0; i < numStars; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 1.5 + 0.5,
                    vx: Math.random() * 0.2 - 0.1,
                    vy: Math.random() * 0.2 - 0.1
                });
            }

            function drawStars() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#FFFFFF';
                stars.forEach(star => {
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fill();
                });
            }

            function updateStars() {
                stars.forEach(star => {
                    star.x += star.vx;
                    star.y += star.vy;
                    if (star.x < 0 || star.x > canvas.width) star.vx = -star.vx;
                    if (star.y < 0 || star.y > canvas.height) star.vy = -star.vy;
                });
            }

            function animate() {
                drawStars();
                updateStars();
                requestAnimationFrame(animate);
            }
            animate();

            // --- Logika UI ---
            const dashboardTab = document.getElementById('dashboard-tab');
            const contactTab = document.getElementById('contact-tab');
            const aiAssistantTab = document.getElementById('ai-assistant-tab'); // Tab AI Asisten
            
            const dashboardView = document.getElementById('dashboard-view');
            const contactView = document.getElementById('contact-view');
            const aiAssistantView = document.getElementById('ai-assistant-view'); // View AI Asisten
            
            const paymentTypeBtns = document.querySelectorAll('.payment-type-btn');
            const ewalletView = document.getElementById('ewallet-view');
            const qrisView = document.getElementById('qris-view');
            const ewalletMethodBtns = document.querySelectorAll('.ewallet-method-btn');
            const placeholder = document.getElementById('placeholder');
            const details = document.getElementById('details');
            const methodNameEl = document.getElementById('method-name');
            const paymentNumberEl = document.getElementById('payment-number');
            const copyBtn = document.getElementById('copy-btn');
            const notification = document.getElementById('notification');

            const chatContainer = document.getElementById('chat-container');
            const chatInput = document.getElementById('chat-input');
            const sendChatBtn = document.getElementById('send-chat-btn');

            const paymentData = {
                dana: { name: "DANA", number: "08174731245" },
                gopay: { name: "GOPAY", number: "08174731245" },
                ovo: { name: "OVO", number: "08174731245" }
            };

            let activeMethod = null;
            let notificationTimeout;
            let clickSound = new Audio('https://www.soundjay.com/buttons/button-1.mp3'); // Efek suara klik

            // Fungsi untuk beralih Tab Utama
            function switchTabView(tabToShow) {
                // Sembunyikan semua view
                dashboardView.classList.add('hidden');
                contactView.classList.add('hidden');
                aiAssistantView.classList.add('hidden');

                // Nonaktifkan semua tab
                dashboardTab.classList.remove('active');
                contactTab.classList.remove('active');
                aiAssistantTab.classList.remove('active');

                // Tampilkan view yang sesuai dan aktifkan tab
                if (tabToShow === 'dashboard') {
                    dashboardView.classList.remove('hidden');
                    dashboardTab.classList.add('active');
                } else if (tabToShow === 'contact') {
                    contactView.classList.remove('hidden');
                    contactTab.classList.add('active');
                } else if (tabToShow === 'ai-assistant') {
                    aiAssistantView.classList.remove('hidden');
                    aiAssistantTab.classList.add('active');
                }
            }
            
            dashboardTab.addEventListener('click', () => { switchTabView('dashboard'); playClickSound(); });
            contactTab.addEventListener('click', () => { switchTabView('contact'); playClickSound(); });
            aiAssistantTab.addEventListener('click', () => { switchTabView('ai-assistant'); playClickSound(); }); // Event listener untuk tab AI Asisten

            // Fungsi untuk beralih antara E-Wallet dan QRIS di dalam Dashboard
            function switchPaymentType(type) {
                paymentTypeBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.type === type));
                ewalletView.classList.toggle('hidden', type !== 'ewallet');
                qrisView.classList.toggle('hidden', type !== 'qris');
            }

            // Fungsi untuk memilih metode E-Wallet
            function selectEwalletMethod(method) {
                activeMethod = method;
                const data = paymentData[method];
                methodNameEl.textContent = data.name;
                paymentNumberEl.textContent = data.number;
                placeholder.classList.add('hidden');
                details.classList.remove('hidden');
                details.classList.add('animate-fadeIn');
                ewalletMethodBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.method === method));
            }

            // Tambahkan efek suara klik ke semua tombol yang relevan
            function addClickSoundToButtons() {
                const allButtons = document.querySelectorAll('button, a.method-btn'); // Pilih semua tombol dan link dengan class method-btn
                allButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        playClickSound();
                    });
                });
            }

            function playClickSound() {
                clickSound.currentTime = 0; // Reset audio ke awal setiap kali diputar
                clickSound.play().catch(e => console.error("Error playing sound:", e));
            }

            paymentTypeBtns.forEach(btn => btn.addEventListener('click', () => { switchPaymentType(btn.dataset.type); playClickSound(); }));
            ewalletMethodBtns.forEach(btn => btn.addEventListener('click', () => { selectEwalletMethod(btn.dataset.method); playClickSound(); }));

            // Event listener untuk tombol salin
            copyBtn.addEventListener('click', () => {
                playClickSound(); // Mainkan suara saat tombol salin diklik
                if (!activeMethod) return;
                const numberToCopy = paymentData[activeMethod].number;
                const textArea = document.createElement("textarea");
                textArea.value = numberToCopy;
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification();
                } catch (err) {
                    console.error('Gagal menyalin nomor:', err);
                }
                document.body.removeChild(textArea);
            });

            // Fungsi untuk menampilkan notifikasi
            function showNotification() {
                clearTimeout(notificationTimeout);
                notification.classList.remove('opacity-0', '-translate-y-10');
                notification.classList.add('opacity-100', 'translate-y-0');
                notificationTimeout = setTimeout(() => {
                    notification.classList.add('opacity-0', '-translate-y-10');
                    notification.classList.remove('opacity-100', 'translate-y-0');
                }, 2500);
            }

            // --- Logika AI Assistant ---
            let chatHistory = [];

            // Fungsi untuk menambahkan pesan ke UI chat
            function addMessageToChat(message, sender) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('chat-message', sender);
                messageElement.textContent = message;
                chatContainer.appendChild(messageElement);
                chatContainer.scrollTop = chatContainer.scrollHeight; // Gulir ke bawah
            }

            // Fungsi untuk menampilkan indikator loading AI
            function showLoadingIndicator() {
                const loadingElement = document.createElement('div');
                loadingElement.classList.add('chat-message', 'ai', 'loading-dots');
                loadingElement.innerHTML = '<span></span><span></span><span></span>';
                loadingElement.id = 'loading-indicator';
                chatContainer.appendChild(loadingElement);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            // Fungsi untuk menyembunyikan indikator loading AI
            function hideLoadingIndicator() {
                const loadingElement = document.getElementById('loading-indicator');
                if (loadingElement) {
                    loadingElement.remove();
                }
            }

            // Fungsi untuk mengirim pesan ke Gemini API
            async function sendMessageToGemini() {
                const prompt = chatInput.value.trim();
                if (prompt === '') return;

                addMessageToChat(prompt, 'user');
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                chatInput.value = ''; // Kosongkan input

                showLoadingIndicator(); // Tampilkan indikator loading

                try {
                    const payload = { contents: chatHistory };
                    const apiKey = ""; // API key akan diisi secara otomatis oleh Canvas
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();
                    
                    hideLoadingIndicator(); // Sembunyikan indikator loading

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const aiResponse = result.candidates[0].content.parts[0].text;
                        addMessageToChat(aiResponse, 'ai');
                        chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });
                    } else {
                        addMessageToChat("Maaf, saya tidak dapat memahami permintaan Anda. Bisakah Anda mencoba lagi?", 'ai');
                    }
                } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    hideLoadingIndicator(); // Sembunyikan indikator loading jika ada error
                    addMessageToChat("Terjadi kesalahan saat menghubungi AI. Mohon coba lagi nanti.", 'ai');
                }
            }

            sendChatBtn.addEventListener('click', () => { sendMessageToGemini(); playClickSound(); });
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessageToGemini();
                    playClickSound();
                }
            });

            // Inisialisasi
            switchTabView('dashboard'); // Tampilkan dashboard saat pertama kali dimuat
            switchPaymentType('ewallet'); // Di dalam dashboard, tampilkan e-wallet
            selectEwalletMethod('dana'); // Pilih Dana secara default
            addClickSoundToButtons(); // Tambahkan efek suara ke semua tombol
        });
    </script>
</body>
</html>
