<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIWAAI - Portal Antarbintang</title>
    <!-- Chosen Palette: Deep Space Blues, Galactic Purples, Neon Accents -->
    <!-- Application Structure Plan: Website ini dirancang sebagai Single Page Application (SPA) yang imersif dengan dashboard futuristik. Sidebar vertikal di sisi kiri menyediakan navigasi utama yang kini disederhanakan (tanpa Profil Pengguna dan Logout), dapat ditutup/dibuka, dan responsif untuk mobile (drawer). Semua bagian konten utama (Dashboard Utama, E-Wallet, QRIS, AI Assistant, Hosting Panel, Pengaturan) selalu terlihat di dalam area konten utama, dan dapat diakses langsung melalui sidebar. Latar belakang 3D dinamis dengan Three.js, efek glassmorphism, dan neon-glow diterapkan di seluruh antarmuka. Animasi berbasis scroll (AOS.js) dan efek suara (Tone.js) meningkatkan interaktivitas. Struktur ini dirancang untuk memberikan pengalaman visual yang memukau dan navigasi yang intuitif, memastikan responsivitas penuh di semua perangkat. -->
    <!-- Visualization & Content Choices: Fokus pada visualisasi tema luar angkasa dan interaktivitas fungsional. Goal: Menciptakan pengalaman portal luar angkasa yang imersif, fungsional, dan menarik -> Presentation: Latar belakang 3D Three.js (bintang, planet, komet) dengan paralaks dan interaksi mouse/sentuhan; teks typing animation di header; sidebar glassmorphism dengan ikon glowing dan efek laser hover; panel glassmorphism dengan neon-glow; tombol interaktif dengan efek hover dan suara; navigasi tab dinamis; antarmuka obrolan AI; ikon media sosial bertema luar angkasa; gambar QRIS dengan efek laser glowing; footer dengan typing animation. -> Interaction: Animasi latar belakang interaktif; scroll-triggered animations (AOS.js); efek suara klik tombol (Tone.js); tombol toggle sidebar; navigasi tab dinamis; fungsionalitas salin nomor; interaksi AI melalui Gemini API. Justifikasi: Desain ini secara holistik menggabungkan estetika sci-fi yang kuat dengan fungsionalitas yang jelas, menggunakan berbagai teknik animasi dan interaktif untuk menciptakan "wow factor" dan pengalaman pengguna yang tak terlupakan, sambil memastikan responsivitas dan aksesibilitas. Library/Method: Three.js untuk 3D, AOS.js untuk scroll-triggered, Tone.js untuk audio, Vanilla JS untuk interaksi UI, Tailwind CSS untuk styling, Gemini API (gemini-2.0-flash) untuk AI. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Exo+2:wght@300;400;500;600;700&family=Audiowide&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        body {
            font-family: 'Exo 2', sans-serif;
            overflow-x: hidden; /* Prevent horizontal scroll */
            background-color: #000; /* Fallback */
            color: #e0e7ff; /* Light blue/white text */
            scroll-behavior: smooth;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%2300bfff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crosshair"><circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="2" y2="12"></line><line x1="12" y1="22" x2="12" y2="2"></line></svg>') 12 12, auto; /* Custom crosshair cursor */
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Orbitron', sans-serif;
        }

        /* Three.js Canvas */
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* Below everything else */
        }

        /* Glassmorphism & Neon Glow */
        .glass-panel {
            background: rgba(10, 25, 40, 0.6); /* Darker semi-transparent */
            backdrop-filter: blur(10px);
            border: 1px solid rgba(70, 130, 180, 0.3); /* SteelBlue */
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.2), inset 0 0 8px rgba(0, 191, 255, 0.1); /* DeepSkyBlue glow */
        }
        .neon-border {
            border: 2px solid;
            border-image: linear-gradient(45deg, #00bfff, #8a2be2, #00bfff) 1; /* DeepSkyBlue to BlueViolet */
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.5), 0 0 30px rgba(138, 43, 226, 0.3);
        }
        .text-neon-blue {
            color: #00bfff; /* DeepSkyBlue */
            text-shadow: 0 0 8px rgba(0, 191, 255, 0.6);
        }
        .text-neon-purple {
            color: #8a2be2; /* BlueViolet */
            text-shadow: 0 0 8px rgba(138, 43, 226, 0.6);
        }
        .btn-neon {
            background: linear-gradient(45deg, #00bfff, #8a2be2);
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.5), 0 0 30px rgba(138, 43, 226, 0.3);
            transition: all 0.3s ease;
        }
        .btn-neon:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 0 25px rgba(0, 191, 255, 0.8), 0 0 40px rgba(138, 43, 226, 0.6);
        }

        /* Typing Animation */
        .typing-text-container {
            display: inline-block; /* Allows border-right to act as cursor */
            overflow: hidden;
            white-space: nowrap;
            border-right: 4px solid #00bfff; /* Blinking cursor */
            animation: blink-caret .75s step-end infinite;
        }
        .typing-text-container.finished {
            border-right: none;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #00bfff; }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #1a237e; /* Dark blue */
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #00bfff, #8a2be2);
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #00e0ff, #9933ff);
        }

        /* Social Media Icons */
        .social-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: #e0e7ff;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .social-icon:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .social-icon.whatsapp:hover {
            background-color: #25D366;
            color: white;
        }
        .social-icon.telegram:hover {
            background-color: #0088CC;
            color: white;
        }

        /* AI Assistant Section */
        #ai-response-area {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(70, 130, 180, 0.2);
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #4a148c #1a237e;
        }
        #ai-response-area::-webkit-scrollbar {
            width: 8px;
        }
        #ai-response-area::-webkit-scrollbar-track {
            background: #1a237e;
            border-radius: 10px;
        }
        #ai-response-area::-webkit-scrollbar-thumb {
            background-color: #4a148c;
            border-radius: 10px;
            border: 2px solid #1a237e;
        }
        #ai-response-area p {
            margin-bottom: 0.5rem;
        }
        #ai-response-area p:last-child {
            margin-bottom: 0;
        }
        .loading-dots span {
            animation: blink 1s infinite;
        }
        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        /* Sidebar Specific Styles */
        .sidebar {
            width: 280px; /* Default expanded width */
            transform: translateX(0);
            transition: width 0.3s ease-in-out, transform 0.3s ease-in-out;
            z-index: 40; /* Above main content, below loading screen */
        }
        .sidebar.collapsed {
            width: 80px; /* Collapsed width (icon-only) */
        }
        .sidebar.hidden-mobile { /* For mobile drawer */
            transform: translateX(-100%);
        }
        .content-container { /* Renamed from sidebar-content-area for clarity */
            margin-left: 280px; /* Space for expanded sidebar */
            transition: margin-left 0.3s ease-in-out;
            flex-grow: 1; /* Allow it to take remaining space */
        }
        .content-container.collapsed {
            margin-left: 80px; /* Space for collapsed sidebar */
        }
        .sidebar-item {
            position: relative;
            overflow: hidden;
        }
        .sidebar-item.active {
            border-left: 4px solid #00bfff;
            background: rgba(0, 191, 255, 0.1);
            color: #00bfff;
            box-shadow: inset 4px 0 15px rgba(0, 191, 255, 0.4);
        }
        .sidebar-item:hover .laser-line {
            transform: translateX(0);
        }
        .laser-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 191, 255, 0.3), transparent);
            transform: translateX(-100%);
            transition: transform 0.3s ease-out;
            z-index: -1;
        }

        /* Mobile specific adjustments */
        @media (max-width: 767px) {
            .sidebar {
                width: 250px; /* Full width for mobile drawer */
                position: fixed;
                height: 100%;
                top: 0;
                left: 0;
                transform: translateX(-100%); /* Hidden by default */
                box-shadow: 5px 0 15px rgba(0,0,0,0.5);
            }
            .sidebar.active-mobile {
                transform: translateX(0);
            }
            .content-container {
                margin-left: 0; /* No margin on mobile */
            }
            .hamburger-menu {
                display: block; /* Show hamburger on mobile */
            }
            .sidebar-toggle-desktop {
                display: none; /* Hide desktop toggle on mobile */
            }
            .sidebar-item span { /* Always show text in mobile drawer */
                display: inline-block; /* Ensure text is visible in mobile drawer */
            }
            .sidebar.collapsed .sidebar-item span { /* Override for mobile */
                display: inline-block;
            }
        }
        @media (min-width: 768px) {
            .sidebar.collapsed .sidebar-item span {
                display: none; /* Hide text when collapsed on desktop */
            }
            .sidebar.collapsed .sidebar-item {
                justify-content: center; /* Center icons when text is hidden */
            }
            .sidebar.collapsed .sidebar-item i {
                margin-right: 0 !important; /* Remove margin from icon */
            }
            .hamburger-menu {
                display: none; /* Hide hamburger on desktop */
            }
            .sidebar-toggle-desktop {
                display: block; /* Show desktop toggle on desktop */
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slideInUp {
            animation: slideInUp 0.6s ease-out forwards;
        }

        @keyframes pulseBorder {
            0% { border-color: rgba(0, 191, 255, 0.4); box-shadow: 0 0 0 0 rgba(0, 191, 255, 0.4); }
            50% { border-color: rgba(0, 191, 255, 0.8); box-shadow: 0 0 0 8px rgba(0, 191, 255, 0); }
            100% { border-color: rgba(0, 191, 255, 0.4); box-shadow: 0 0 0 0 rgba(0, 191, 255, 0); }
        }
        .animate-pulseBorder {
            animation: pulseBorder 2s infinite;
        }

        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            70% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); }
        }
        .animate-popIn {
            animation: popIn 0.3s ease-out forwards;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            50% { transform: translateX(3px); }
            75% { transform: translateX(-3px); }
        }
        .animate-shake {
            animation: shake 0.2s ease-in-out;
        }

        @keyframes floatEffect {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: floatEffect 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.9); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        @keyframes cometFly {
            0% { opacity: 0; transform: translateX(-100px) rotate(-45deg); }
            10% { opacity: 1; }
            100% { opacity: 0; transform: translateX(100vw) rotate(-45deg); }
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes blink {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        /* Light Mode Styles */
        body.light-mode {
            background: linear-gradient(135deg, #e0f2f7 0%, #bbdefb 100%); /* Light blue gradient */
            color: #1a237e; /* Dark blue text */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%233f51b5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crosshair"><circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="2" y2="12"></line><line x1="12" y1="22" x2="12" y2="2"></line></svg>') 12 12, auto;
        }
        body.light-mode .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(173, 216, 230, 0.5);
            box-shadow: 0 0 20px rgba(63, 81, 181, 0.2), inset 0 0 8px rgba(63, 81, 181, 0.1);
        }
        body.light-mode .neon-border {
            border-image: linear-gradient(45deg, #3f51b5, #673ab7, #3f51b5) 1;
            box-shadow: 0 0 15px rgba(63, 81, 181, 0.5), 0 0 30px rgba(103, 58, 183, 0.3);
        }
        body.light-mode .text-neon-blue {
            color: #3f51b5; /* Indigo 500 */
            text-shadow: 0 0 8px rgba(63, 81, 181, 0.6);
        }
        body.light-mode .text-neon-purple {
            color: #673ab7; /* Deep Purple 500 */
            text-shadow: 0 0 8px rgba(103, 58, 183, 0.6);
        }
        body.light-mode .btn-neon {
            background: linear-gradient(45deg, #3f51b5, #673ab7);
            box-shadow: 0 0 15px rgba(63, 81, 181, 0.5), 0 0 30px rgba(103, 58, 183, 0.3);
        }
        body.light-mode .tab-active {
            border-bottom-color: #3f51b5;
            color: #3f51b5;
        }
        body.light-mode .tab-inactive {
            color: #616161;
        }
        body.light-mode main {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(173, 216, 230, 0.5);
        }
        body.light-mode .method-btn {
            background-color: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(63, 81, 181, 0.2);
            color: #374151;
        }
        body.light-mode .method-btn-active {
            background-color: rgba(63, 81, 181, 0.1);
            border-color: #3f51b5;
            color: #3f51b5;
            box-shadow: 0 0 15px rgba(63, 81, 181, 0.5);
        }
        body.light-mode #details-container,
        body.light-mode .qris-container,
        body.light-mode #ai-response-area {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(63, 81, 181, 0.2);
        }
        body.light-mode #payment-number {
            color: #3f51b5;
            text-shadow: none;
        }
        body.light-mode #copy-btn {
            background: linear-gradient(45deg, #3f51b5, #673ab7);
        }
        body.light-mode #ai-input {
            background: #ffffff;
            border-color: #bbdefb;
            color: #1a237e;
            placeholder-color: #616161;
        }
        body.light-mode #ai-loading-indicator {
            background: rgba(255, 255, 255, 0.8);
        }
        body.light-mode .social-icon {
            background: rgba(0, 0, 0, 0.05);
            color: #3f51b5;
        }
        body.light-mode footer p {
            color: #3f51b5;
        }
        body.light-mode .fa-eye-slash, body.light-mode .fa-eye {
            color: white; /* Ensure toggle button icon remains visible */
        }
        body.light-mode #toggle-main-content-btn {
            background-color: #3f51b5; /* Indigo 500 */
        }
        body.light-mode #notification {
            background: linear-gradient(45deg, #3f51b5, #673ab7);
        }
        body.light-mode .planet {
            background: radial-gradient(circle at 30% 30%, #a7ffeb, #80cbc4, #4db6ac); /* Lighter planet color */
            box-shadow: 0 0 40px rgba(77, 182, 172, 0.5);
        }
        body.light-mode .star {
            background-color: #616161; /* Darker stars in light mode */
        }
        body.light-mode .comet {
            background: linear-gradient(to right, rgba(0,0,0,0) 0%, rgba(77, 182, 172, 0.8) 30%, rgba(0,0,0,1) 100%);
        }
        body.light-mode .sidebar-item.active {
            border-left-color: #3f51b5;
            background: rgba(63, 81, 181, 0.1);
            color: #3f51b5;
            box-shadow: inset 4px 0 15px rgba(63, 81, 181, 0.4);
        }
        body.light-mode .laser-line {
            background: linear-gradient(90deg, transparent, rgba(63, 81, 181, 0.3), transparent);
        }
    </style>
</head>
<body class="bg-black text-blue-100 min-h-screen flex">

    <!-- Three.js Canvas for Background -->
    <canvas id="three-canvas"></canvas>

    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-black flex flex-col items-center justify-center z-[9999] transition-opacity duration-1000">
        <div class="relative w-32 h-32 mb-8">
            <div class="absolute inset-0 border-4 border-t-4 border-blue-500 rounded-full animate-spin"></div>
            <div class="absolute inset-0 flex items-center justify-center text-blue-300 text-xl font-bold font-['Orbitron']">MIWAAI</div>
        </div>
        <p class="text-blue-300 text-xl font-['Audiowide']">Memuat Portal Antarbintang...</p>
    </div>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar fixed top-0 left-0 h-full glass-panel flex flex-col py-6 px-4">
        <div class="flex items-center justify-between mb-8">
            <div class="flex items-center">
                <img src="https://files.catbox.moe/4ya0zn.jpg" alt="MIWAAI Logo" class="w-10 h-10 rounded-full mr-3 border-2 border-neon-blue">
                <span class="text-xl font-bold text-neon-blue whitespace-nowrap">MIWAAI</span>
            </div>
            <button id="sidebar-toggle-desktop" class="sidebar-toggle-desktop text-blue-300 hover:text-white transition-colors">
                <i class="fas fa-chevron-left"></i>
            </button>
        </div>

        <nav class="flex-1 space-y-4">
            <a href="#dashboard-view" data-view="dashboard" id="nav-dashboard" class="sidebar-item flex items-center p-3 rounded-lg text-blue-200 hover:text-white hover:bg-blue-900/20 transition-all duration-200 active">
                <i class="fas fa-satellite-dish text-xl mr-4"></i>
                <span class="whitespace-nowrap">Dashboard Utama</span>
                <div class="laser-line"></div>
            </a>
            <a href="#ewallet-view" data-view="ewallet" id="nav-ewallet" class="sidebar-item flex items-center p-3 rounded-lg text-blue-200 hover:text-white hover:bg-blue-900/20 transition-all duration-200">
                <i class="fas fa-wallet text-xl mr-4"></i>
                <span class="whitespace-nowrap">Pembayaran E-Wallet</span>
                <div class="laser-line"></div>
            </a>
            <a href="#qris-view" data-view="qris" id="nav-qris" class="sidebar-item flex items-center p-3 rounded-lg text-blue-200 hover:text-white hover:bg-blue-900/20 transition-all duration-200">
                <i class="fas fa-qrcode text-xl mr-4"></i>
                <span class="whitespace-nowrap">QRIS & Scanner</span>
                <div class="laser-line"></div>
            </a>
            <a href="#ai-view" data-view="ai" id="nav-ai" class="sidebar-item flex items-center p-3 rounded-lg text-blue-200 hover:text-white hover:bg-blue-900/20 transition-all duration-200">
                <i class="fas fa-robot text-xl mr-4"></i>
                <span class="whitespace-nowrap">Asisten AI</span>
                <div class="laser-line"></div>
            </a>
            <a href="#hosting-panel-view" data-view="hosting-panel" id="nav-hosting" class="sidebar-item flex items-center p-3 rounded-lg text-blue-200 hover:text-white hover:bg-blue-900/20 transition-all duration-200">
                <i class="fas fa-rocket text-xl mr-4"></i>
                <span class="whitespace-nowrap">Hosting Panel</span>
                <div class="laser-line"></div>
            </a>
            <a href="#settings-view" data-view="settings" id="nav-settings" class="sidebar-item flex items-center p-3 rounded-lg text-blue-200 hover:text-white hover:bg-blue-900/20 transition-all duration-200">
                <i class="fas fa-cog text-xl mr-4"></i>
                <span class="whitespace-nowrap">Pengaturan</span>
                <div class="laser-line"></div>
            </a>
            <!-- Removed Profil Pengguna -->
        </nav>

        <div class="mt-8 space-y-4">
            <button id="theme-toggle-btn" class="w-full flex items-center p-3 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 transition-colors shadow-md hover:shadow-lg">
                <i class="fa-solid fa-sun text-xl mr-4"></i>
                <span class="whitespace-nowrap">Mode Cahaya</span>
            </button>
            <!-- Removed Logout Button -->
        </div>
    </aside>

    <!-- Main Content Area -->
    <div id="content-container" class="content-container flex-1 flex flex-col min-h-screen">
        <!-- Hamburger Menu for Mobile -->
        <button id="hamburger-menu" class="hamburger-menu fixed top-4 left-4 z-50 p-3 rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-all duration-300">
            <i class="fas fa-bars"></i>
        </button>

        <div class="container mx-auto max-w-2xl px-4 relative z-10 py-8">

            <header class="text-center mb-8">
                <div class="relative inline-block mb-4 group">
                    <img src="https://files.catbox.moe/4ya0zn.jpg" alt="Profil Pengguna" class="w-24 h-24 rounded-full mx-auto border-4 border-white shadow-md transition-transform duration-300 group-hover:scale-105 animate-float">
                    <div class="absolute inset-0 rounded-full border-4 border-transparent group-hover:border-blue-400 transition-all duration-300 animate-pulseBorder"></div>
                </div>
                <h1 class="text-3xl sm:text-4xl font-bold font-['Orbitron'] text-blue-300 leading-tight drop-shadow-lg typing-text-container">
                    <span id="hero-typing-text" class="text-neon-blue"></span>
                </h1>
                <p class="text-xs text-blue-200 mt-1">Credit: 𝐌𝐢𝐰𝐚𝐚𝐆𝐎𝐃</p>
            </header>

            <!-- Initial Contact Section - Always Visible -->
            <section id="initial-contact-section" class="glass-panel p-8 rounded-xl mb-8 animate-slideInUp" data-aos="zoom-in">
                <h2 class="text-2xl font-bold text-neon-blue mb-4 text-center">Hubungi Developer</h2>
                <p class="text-blue-200 text-center mb-6">Punya pertanyaan atau butuh bantuan? Hubungi kami melalui media sosial di bawah ini.</p>
                <div class="flex justify-center space-x-6">
                    <a href="https://wa.me/628174731245" target="_blank" class="social-icon whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://t.me/miwasogg" target="_blank" class="social-icon telegram">
                        <i class="fab fa-telegram-plane"></i>
                    </a>
                </div>
            </section>

            <main id="main-content" class="rounded-xl shadow-xl overflow-hidden">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="content-view p-6 sm:p-8">
                    <div class="text-center mb-6">
                        <h2 class="text-xl font-semibold text-blue-200">Selamat Datang di Dashboard Utama!</h2>
                        <p class="text-blue-300 mt-1">Jelajahi fitur-fitur portal antarbintang Anda.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="glass-panel p-4 rounded-lg text-center" data-aos="fade-up">
                            <i class="fas fa-chart-line text-4xl text-neon-blue mb-2"></i>
                            <h3 class="text-lg font-semibold">Statistik Perjalanan</h3>
                            <p class="text-blue-200">Lihat ringkasan aktivitas perjalanan Anda.</p>
                        </div>
                        <div class="glass-panel p-4 rounded-lg text-center" data-aos="fade-up" data-aos-delay="100">
                            <i class="fas fa-bell text-4xl text-neon-purple mb-2"></i>
                            <h3 class="text-lg font-semibold">Notifikasi Terbaru</h3>
                            <p class="text-blue-200">Pembaruan penting dari sistem portal.</p>
                        </div>
                    </div>
                </div>

                <!-- E-Wallet View -->
                <div id="ewallet-view" class="content-view p-6 sm:p-8 hidden">
                    <div class="text-center mb-6">
                         <h2 class="text-xl font-semibold text-blue-200">Pembayaran E-Wallet</h2>
                         <p class="text-blue-300 mt-1">Pilih penyedia layanan untuk melihat nomor tujuan.</p>
                    </div>

                    <div id="method-selector" class="grid grid-cols-3 gap-3 mb-6">
                        <button data-method="dana" class="method-btn p-3 text-center border rounded-lg hover:scale-105 active:scale-95">Dana</button>
                        <button data-method="ovo" class="method-btn p-3 text-center border rounded-lg hover:scale-105 active:scale-95">OVO</button>
                        <button data-method="gopay" class="method-btn p-3 text-center border rounded-lg hover:scale-105 active:scale-95">Gopay</button>
                    </div>

                    <div id="details-container" class="rounded-lg p-5 text-center min-h-[140px] flex flex-col justify-center animate-fadeIn">
                        <div id="placeholder">
                            <i class="fa-solid fa-arrow-up text-blue-500 text-2xl"></i>
                            <p class="mt-2 text-blue-400">Pilih metode di atas</p>
                        </div>
                        <div id="details" class="hidden">
                            <img id="method-logo" src="" alt="Logo Metode" class="h-10 mx-auto mb-3 animate-popIn">
                            <p class="text-sm text-blue-300">Nomor Akun <span id="method-name" class="font-semibold"></span></p>
                            <div class="flex items-center justify-center gap-4 mt-2">
                                <p id="payment-number" class="text-2xl font-mono font-bold tracking-wide animate-popIn"></p>
                                <button id="copy-btn" class="w-10 h-10 rounded-lg text-sm font-semibold hover:scale-105 active:scale-95 transition-all duration-200 flex items-center justify-center shadow-md hover:shadow-lg active:shadow-sm">
                                    <i class="fa-regular fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- QRIS View -->
                <div id="qris-view" class="content-view p-6 sm:p-8 hidden">
                     <div class="text-center mb-6">
                         <h2 class="text-xl font-semibold text-blue-200">Pembayaran QRIS</h2>
                         <p class="text-blue-300 mt-1">Pindai kode untuk membayar dengan aplikasi apa pun.</p>
                    </div>
                    <div class="max-w-60 mx-auto p-3 rounded-lg border-2 border-blue-700 shadow-inner animate-popIn bg-blue-900">
                        <img src="https://files.catbox.moe/x5ixxt.jpeg" alt="Kode QRIS untuk MIWAAI" class="w-full h-auto rounded-md">
                    </div>
                     <p class="text-center text-xs text-blue-300 mt-4">Pastikan nama merchant adalah <strong class="text-blue-100">MIWAAI HOSTING</strong>.</p>
                </div>

                <!-- AI Assistant View -->
                <div id="ai-view" class="content-view p-6 sm:p-8 hidden">
                    <div class="text-center mb-6">
                        <h2 class="text-xl font-semibold text-blue-200">Asisten AI MIWAAI</h2>
                        <p class="text-blue-300 mt-1">Ajukan pertanyaan tentang pembayaran digital, teknologi, atau apa pun!</p>
                    </div>
                    <div class="flex flex-col gap-4">
                        <textarea id="ai-input" class="w-full p-3 rounded-lg bg-blue-900 border border-blue-700 text-white placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y min-h-[80px]" placeholder="Ketik pertanyaan Anda di sini..."></textarea>
                        <button id="ask-ai-btn" class="w-full py-3 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors shadow-md hover:shadow-lg flex items-center justify-center space-x-2">
                            <i class="fa-solid fa-sparkles"></i>
                            <span>Tanya AI ✨</span>
                        </button>
                        <div id="ai-response-area" class="p-4 rounded-lg text-blue-100 text-left relative">
                            <p id="ai-response-text">Asisten AI siap membantu Anda. Ajukan pertanyaan!</p>
                            <div id="ai-loading-indicator" class="hidden absolute inset-0 bg-blue-950 bg-opacity-80 flex items-center justify-center rounded-lg">
                                <span class="loading-dots text-2xl text-blue-400">.<span>.</span><span>.</span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hosting Panel View (Dummy) -->
                <div id="hosting-panel-view" class="content-view p-6 sm:p-8 hidden">
                    <div class="text-center mb-6">
                        <h2 class="text-xl font-semibold text-blue-200">Panel Hosting Antarbintang</h2>
                        <p class="text-blue-300 mt-1">Kelola sumber daya hosting galaksi Anda.</p>
                    </div>
                    <div class="glass-panel p-4 rounded-lg text-center" data-aos="fade-up">
                        <i class="fas fa-server text-4xl text-neon-blue mb-2"></i>
                        <h3 class="text-lg font-semibold">Status Server: Online</h3>
                        <p class="text-blue-200">Semua sistem beroperasi pada kapasitas optimal.</p>
                    </div>
                    <div class="glass-panel p-4 rounded-lg text-center mt-4" data-aos="fade-up" data-aos-delay="100">
                        <i class="fas fa-upload text-4xl text-neon-purple mb-2"></i>
                        <h3 class="text-lg font-semibold">Unggah Data Kosmik</h3>
                        <p class="text-blue-200">Transfer file ke jaringan antarplanet kami.</p>
                    </div>
                </div>

                <!-- Settings View (Dummy) -->
                <div id="settings-view" class="content-view p-6 sm:p-8 hidden">
                    <div class="text-center mb-6">
                        <h2 class="text-xl font-semibold text-blue-200">Pengaturan Portal</h2>
                        <p class="text-blue-300 mt-1">Sesuaikan pengalaman antarbintang Anda.</p>
                    </div>
                    <div class="glass-panel p-4 rounded-lg" data-aos="fade-up">
                        <h3 class="text-lg font-semibold text-white mb-2">Preferensi Tampilan</h3>
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" id="dark-mode-toggle-setting" class="sr-only peer">
                            <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                            <span class="text-blue-200">Aktifkan Mode Gelap</span>
                        </label>
                    </div>
                    <div class="glass-panel p-4 rounded-lg mt-4" data-aos="fade-up" data-aos-delay="100">
                        <h3 class="text-lg font-semibold text-white mb-2">Pengaturan Notifikasi</h3>
                        <p class="text-blue-200">Pilih jenis notifikasi yang ingin Anda terima.</p>
                    </div>
                </div>

                <!-- Removed Profile View -->
            </main>
            
            <footer class="text-center mt-8">
                <p class="text-sm text-blue-400 typing-footer-container">&copy; 2025 MIWAAI HOSTING. Semua Hak Cipta Dilindungi. | Desain oleh <span id="footer-typing-text" class="text-neon-blue"></span></p>
            </footer>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="fixed bottom-5 left-1/2 -translate-x-1/2 text-white text-sm py-2 px-4 rounded-full shadow-xl transition-all duration-300 opacity-0 translate-y-4 pointer-events-none">
        Nomor berhasil disalin ke clipboard!
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: true,
            mirror: false,
        });

        // Three.js Background Setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('three-canvas'), antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        // Starfield
        const starGeometry = new THREE.BufferGeometry();
        const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.5 });
        const starVertices = [];
        for (let i = 0; i < 10000; i++) {
            const x = (Math.random() - 0.5) * 2000;
            const y = (Math.random() - 0.5) * 2000;
            const z = (Math.random() - 0.5) * 2000;
            starVertices.push(x, y, z);
        }
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        const stars = new THREE.Points(starGeometry, starMaterial);
        scene.add(stars);

        // Planet (simple sphere for now)
        const planetGeometry = new THREE.SphereGeometry(50, 64, 64);
        const planetMaterial = new THREE.MeshBasicMaterial({ color: 0x8a2be2 }); // BlueViolet
        const planet = new THREE.Mesh(planetGeometry, planetMaterial);
        planet.position.set(200, 50, -300);
        scene.add(planet);

        // Comet/Meteor effect (simple moving particles)
        const cometGeometry = new THREE.BufferGeometry();
        const cometMaterial = new THREE.PointsMaterial({ color: 0x00bfff, size: 2, transparent: true, opacity: 0.8 });
        const cometParticles = [];
        for (let i = 0; i < 50; i++) {
            cometParticles.push(
                (Math.random() - 0.5) * 1000,
                (Math.random() - 0.5) * 1000,
                (Math.random() - 0.5) * 1000
            );
        }
        cometGeometry.setAttribute('position', new THREE.Float32BufferAttribute(cometParticles, 3));
        const comets = new THREE.Points(cometGeometry, cometMaterial);
        scene.add(comets);

        camera.position.z = 5;

        // Animation Loop
        let mouseX = 0, mouseY = 0;
        let targetX = 0, targetY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX - windowHalfX);
            mouseY = (event.clientY - windowHalfY);
        });

        document.addEventListener('touchmove', (event) => {
            if (event.touches.length > 0) {
                mouseX = (event.touches[0].clientX - windowHalfX);
                mouseY = (event.touches[0].clientY - windowHalfY);
            }
        });

        document.addEventListener('touchend', () => {
            mouseX = 0;
            mouseY = 0;
        });


        function animate() {
            requestAnimationFrame(animate);

            targetX = mouseX * 0.001;
            targetY = mouseY * 0.001;

            camera.rotation.y += 0.05 * (targetX - camera.rotation.y);
            camera.rotation.x += 0.05 * (targetY - camera.rotation.x);

            stars.rotation.y += 0.0005;
            planet.rotation.y += 0.001;
            comets.rotation.x += 0.005;
            comets.rotation.y += 0.005;
            comets.rotation.z += 0.005;

            renderer.render(scene, camera);
        }
        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Typing Animation for Hero Section
        const heroTextElement = document.getElementById('hero-typing-text');
        const textToType = "Pusat Pembayaran MIWAAI";
        let heroCharIndex = 0;

        function typeHeroText() {
            if (heroCharIndex < textToType.length) {
                heroTextElement.textContent += textToType.charAt(heroCharIndex);
                heroCharIndex++;
                setTimeout(typeHeroText, 100); // Typing speed
            } else {
                heroTextElement.parentElement.classList.add('finished'); // Remove blinking cursor after typing
            }
        }
        
        // Typing Animation for Footer
        const footerTextElement = document.getElementById('footer-typing-text');
        const footerTextToType = "MiwasoGOD";
        let footerCharIndex = 0;

        function typeFooterText() {
            if (footerCharIndex < footerTextToType.length) {
                footerTextElement.textContent += footerTextToType.charAt(footerCharIndex);
                footerCharIndex++;
                setTimeout(typeFooterText, 150); // Typing speed
            } else {
                // Optionally remove cursor effect from footer after typing
                footerTextElement.style.borderRight = 'none';
            }
        }

        // Sci-Fi Button Click Sound
        const synth = new Tone.Synth().toDestination();
        document.body.addEventListener('click', () => {
            if (Tone.context.state !== 'running') {
                Tone.start();
            }
        }, { once: true });

        document.querySelectorAll('button, a.social-icon, .method-btn, .sidebar-item').forEach(button => {
            button.addEventListener('click', () => {
                try {
                    synth.triggerAttackRelease("C5", "8n"); // Play a short tone
                } catch (error) {
                    console.warn("Audio context not ready or error playing sound:", error);
                }
            });
        });

        // Main App Logic (from previous index.html)
        const ewalletTab = document.getElementById('ewallet-tab');
        const qrisTab = document.getElementById('qris-tab');
        const aiTab = document.getElementById('ai-tab');
        const ewalletView = document.getElementById('ewallet-view');
        const qrisView = document.getElementById('qris-view');
        const aiView = document.getElementById('ai-view');
        const methodSelector = document.getElementById('method-selector');
        
        const placeholder = document.getElementById('placeholder');
        const details = document.getElementById('details');
        const methodNameEl = document.getElementById('method-name');
        const methodLogoEl = document.getElementById('method-logo');
        const paymentNumberEl = document.getElementById('payment-number');
        const copyBtn = document.getElementById('copy-btn');
        const notification = document.getElementById('notification');

        const aiInput = document.getElementById('ai-input');
        const askAiBtn = document.getElementById('ask-ai-btn');
        const aiResponseArea = document.getElementById('ai-response-area');
        const aiResponseText = document.getElementById('ai-response-text');
        const aiLoadingIndicator = document.getElementById('ai-loading-indicator');


        const paymentData = {
            dana: { name: "DANA", number: "08174731245", logo: "https://files.catbox.moe/ub1asb.jpg" },
            ovo: { name: "OVO", number: "08174731245", logo: "https://files.catbox.moe/xk31nx.jpg" },
            gopay: { name: "GOPAY", number: "08174731245", logo: "https://files.catbox.moe/46j4wz.jpg" }
        };

        let notificationTimeout;

        function switchTabContent(view) { // Renamed from switchView to avoid conflict with sidebar view switching
            ewalletView.classList.add('hidden');
            qrisView.classList.add('hidden');
            aiView.classList.add('hidden');

            ewalletTab.classList.remove('tab-active');
            ewalletTab.classList.add('tab-inactive');
            qrisTab.classList.remove('tab-active');
            qrisTab.classList.add('tab-inactive');
            aiTab.classList.remove('tab-active');
            aiTab.classList.add('tab-inactive');

            if (view === 'ewallet') {
                ewalletView.classList.remove('hidden');
                ewalletTab.classList.add('tab-active');
                ewalletTab.classList.remove('tab-inactive');
            } else if (view === 'qris') {
                qrisView.classList.remove('hidden');
                qrisTab.classList.add('tab-active');
                qrisTab.classList.remove('tab-inactive');
            } else if (view === 'ai') {
                aiView.classList.remove('hidden');
                aiTab.classList.add('tab-active');
                aiTab.classList.remove('tab-inactive');
            }
        }
        
        function selectMethod(method) {
            activeMethod = method;
            const data = paymentData[method];

            methodNameEl.textContent = data.name;
            paymentNumberEl.textContent = data.number;
            methodLogoEl.src = data.logo;
            methodLogoEl.alt = `Logo ${data.name}`;

            placeholder.classList.add('hidden');
            details.classList.remove('hidden');
            details.classList.add('animate-fadeIn');

            methodSelector.querySelectorAll('button').forEach(btn => {
                const isSelected = btn.dataset.method === method;
                btn.classList.toggle('method-btn-active', isSelected);
                btn.classList.toggle('method-btn-inactive', !isSelected);
            });
        }

        ewalletTab.addEventListener('click', () => {
            switchTabContent('ewallet');
            selectMethod('dana'); // Re-select Dana when E-Wallet tab is clicked
        });
        qrisTab.addEventListener('click', () => switchTabContent('qris'));
        aiTab.addEventListener('click', () => switchTabContent('ai'));

        methodSelector.addEventListener('click', (e) => {
            const button = e.target.closest('button');
            if (button && button.dataset.method) {
                selectMethod(button.dataset.method);
            }
        });

        copyBtn.addEventListener('click', () => {
            if (!activeMethod) return;
            const numberToCopy = paymentData[activeMethod].number;
            navigator.clipboard.writeText(numberToCopy).then(() => {
                showNotification();
                copyBtn.classList.add('animate-shake');
                setTimeout(() => {
                    copyBtn.classList.remove('animate-shake');
                }, 200);
            });
        });

        function showNotification() {
            clearTimeout(notificationTimeout);
            notification.classList.remove('opacity-0', 'translate-y-4');
            notificationTimeout = setTimeout(() => {
                notification.classList.add('opacity-0', 'translate-y-4');
            }, 2500);
        }
        
        // Gemini AI Integration
        askAiBtn.addEventListener('click', async () => {
            const prompt = aiInput.value.trim();
            if (!prompt) {
                aiResponseText.textContent = "Silakan masukkan pertanyaan Anda.";
                return;
            }

            aiResponseText.textContent = '';
            aiLoadingIndicator.classList.remove('hidden');
            askAiBtn.disabled = true;
            aiInput.disabled = true;

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`API error: ${response.status} - ${errorData.error.message || 'Unknown error'}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    aiResponseText.textContent = text;
                } else {
                    aiResponseText.textContent = "Maaf, saya tidak dapat memahami pertanyaan Anda atau menghasilkan respons. Silakan coba lagi.";
                    console.error("Unexpected API response structure:", result);
                }
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                aiResponseText.textContent = `Terjadi kesalahan: ${error.message}. Silakan coba lagi nanti.`;
            } finally {
                aiLoadingIndicator.classList.add('hidden');
                askAiBtn.disabled = false;
                aiInput.disabled = false;
                aiInput.value = '';
            }
        });

        // Theme Toggle (Light/Dark Mode)
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        const themeToggleIcon = themeToggleBtn.querySelector('i');
        let isLightMode = false;
        
        function applyTheme(isLight) {
            const darkModeToggleSetting = document.getElementById('dark-mode-toggle-setting'); // Get it inside the function
            if (isLight) {
                document.body.classList.add('light-mode');
                themeToggleIcon.classList.remove('fa-sun');
                themeToggleIcon.classList.add('fa-moon');
                starMaterial.color.set(0x616161); // Darker stars in light mode
                planetMaterial.color.set(0xa7ffeb); // Lighter planet
                cometMaterial.color.set(0x4db6ac); // Lighter comets
                if (darkModeToggleSetting) darkModeToggleSetting.checked = false; // Uncheck if light mode
            } else {
                document.body.classList.remove('light-mode');
                themeToggleIcon.classList.remove('fa-moon');
                themeToggleIcon.classList.add('fa-sun');
                starMaterial.color.set(0xffffff); // White stars in dark mode
                planetMaterial.color.set(0x8a2be2); // Original planet color
                cometMaterial.color.set(0x00bfff); // Original comets color
                if (darkModeToggleSetting) darkModeToggleSetting.checked = true; // Check if dark mode
            }
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        }

        themeToggleBtn.addEventListener('click', () => {
            isLightMode = !isLightMode;
            applyTheme(isLightMode);
        });
        
        // Sidebar Logic
        const sidebar = document.getElementById('sidebar');
        const sidebarToggleDesktop = document.getElementById('sidebar-toggle-desktop');
        const hamburgerMenu = document.getElementById('hamburger-menu');
        const contentContainer = document.getElementById('content-container');
        const sidebarItems = document.querySelectorAll('.sidebar-item');
        const allContentViews = document.querySelectorAll('.content-view');

        let isSidebarCollapsed = false; // For desktop
        let isSidebarOpenMobile = false; // For mobile drawer

        // Function to set sidebar state for desktop
        function setSidebarDesktopState() {
            if (window.innerWidth >= 768) { // Desktop view
                if (isSidebarCollapsed) {
                    sidebar.classList.add('collapsed');
                    contentContainer.classList.add('collapsed');
                    sidebarToggleDesktop.querySelector('i').classList.replace('fa-chevron-left', 'fa-chevron-right');
                } else {
                    sidebar.classList.remove('collapsed');
                    contentContainer.classList.remove('collapsed');
                    sidebarToggleDesktop.querySelector('i').classList.replace('fa-chevron-right', 'fa-chevron-left');
                }
                sidebar.classList.remove('active-mobile', 'hidden-mobile'); // Ensure mobile classes are off
            } else { // Mobile view
                sidebar.classList.remove('collapsed'); // Sidebar is always 'expanded' in mobile drawer
                contentContainer.classList.remove('collapsed');
                sidebarToggleDesktop.querySelector('i').classList.replace('fa-chevron-right', 'fa-chevron-left'); // Reset icon for next desktop view
                
                if (isSidebarOpenMobile) {
                    sidebar.classList.add('active-mobile');
                    sidebar.classList.remove('hidden-mobile');
                } else {
                    sidebar.classList.remove('active-mobile');
                    sidebar.classList.add('hidden-mobile');
                }
            }
        }

        // Toggle sidebar on desktop
        sidebarToggleDesktop.addEventListener('click', () => {
            isSidebarCollapsed = !isSidebarCollapsed;
            setSidebarDesktopState();
        });

        // Toggle sidebar on mobile (hamburger)
        hamburgerMenu.addEventListener('click', () => {
            isSidebarOpenMobile = !isSidebarOpenMobile;
            setSidebarDesktopState(); // Re-evaluate state for mobile
        });

        // Close sidebar drawer if clicking outside on mobile
        document.body.addEventListener('click', (e) => { // Use body to capture clicks outside sidebar
            if (window.innerWidth < 768 && isSidebarOpenMobile && !sidebar.contains(e.target) && !hamburgerMenu.contains(e.target)) {
                isSidebarOpenMobile = false;
                setSidebarDesktopState();
            }
        });

        // Handle window resize to adjust sidebar state
        window.addEventListener('resize', setSidebarDesktopState);

        // Sidebar navigation active state and content switching
        function showContentView(viewId) {
            allContentViews.forEach(view => {
                view.classList.add('hidden');
            });
            const targetView = document.getElementById(viewId);
            if (targetView) {
                targetView.classList.remove('hidden');
                // Re-initialize AOS for the newly visible content
                AOS.refreshHard();
            }
        }

        sidebarItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault(); // Prevent default anchor link behavior
                sidebarItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                const viewId = this.dataset.view + '-view'; // Get view ID from data-view attribute
                showContentView(viewId);

                // For mobile, close sidebar after selection
                if (window.innerWidth < 768) {
                    isSidebarOpenMobile = false;
                    setSidebarDesktopState();
                }

                // Special handling for E-Wallet tab to select Dana by default
                if (viewId === 'ewallet-view') {
                    switchTabContent('ewallet'); // Activate E-Wallet tab
                    selectMethod('dana'); // Select Dana
                } else if (viewId === 'qris-view' || viewId === 'ai-view') {
                    // For QRIS and AI, ensure their internal tabs are active
                    switchTabContent(this.dataset.view);
                }
            });
        });

        // Initial state on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            // Restore theme from local storage or default to dark
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                isLightMode = true;
            } else {
                isLightMode = false; // Default to dark
            }
            applyTheme(isLightMode);

            // Set initial sidebar state
            setSidebarDesktopState();

            // Start typing animations after loading screen fades
            typeHeroText();
            typeFooterText();

            // Show initial dashboard view and activate its sidebar item
            showContentView('dashboard-view');
            document.getElementById('nav-dashboard').classList.add('active');

            // Event listener for dark mode toggle setting in the settings view
            const darkModeToggleSetting = document.getElementById('dark-mode-toggle-setting');
            if (darkModeToggleSetting) { // Check if element exists before adding listener
                darkModeToggleSetting.addEventListener('change', () => {
                    isLightMode = !darkModeToggleSetting.checked;
                    applyTheme(isLightMode);
                });
            }
        });

        // Loading Screen Logic
        const loadingScreen = document.getElementById('loading-screen');
        window.addEventListener('load', () => {
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                loadingScreen.style.pointerEvents = 'none';
            }, 1000); // 1 second delay before fading out
        });
    </script>
</body>
</html>
